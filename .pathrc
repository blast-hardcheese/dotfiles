#!/bin/sh

remove_path() {
  PATH=$(echo -n "$PATH" | sed -e "s#:$1:#:#g" -e "s#:$1\$##" -e "s#^$1:##")
}

prefix_path() {
  remove_path "$1"

  if [[ -d "$1" ]]; then
    if [ -z "$PATH" ]; then
      PATH="$1"
    else
      PATH="$1:$PATH"
    fi

    man="${1%%/bin}/share/man"
    if [ -d "$man" ]; then
      MANPATH="$man:$MANPATH"
    fi
  fi
}

# airport tool
prefix_path "/System/Library/PrivateFrameworks/Apple80211.framework/Versions/Current/Resources"

# Fink
prefix_path "/sw/bin"

# Macports
prefix_path "/opt/local/bin"
prefix_path "/opt/local/sbin"

prefix_path "/sbin"
prefix_path "/usr/sbin"
prefix_path "/usr/local/bin"
prefix_path "/usr/local/sbin"
prefix_path "/usr/local/share/npm/bin"
prefix_path "/usr/local/opt/ruby/bin"
prefix_path "/usr/local/opt/coreutils/libexec/gnubin"
prefix_path "$HOME/.cabal/bin"
prefix_path "$HOME/.tools/bin"
prefix_path "$HOME/.tools/localized/bin"
prefix_path "$HOME/bin"
prefix_path "$HOME/.bin"
prefix_path "$HOME/.rvm/bin"

ANDROID_PATH="$HOME/.tools/localized/android-sdk"
if [ -d "$ANDROID_PATH" ]; then
    prefix_path "$ANDROID_PATH/tools"
    prefix_path "$ANDROID_PATH/platform-tools"
    export ANDROID_HOME="$ANDROID_PATH"
fi

GOPATH=$HOME/.tools/localized/go
if [ -d "$GOPATH" ]; then
    export GOPATH
    prefix_path "$GOPATH/bin"
fi

# Adding /usr/local sources to searchpaths
if [ -z "$LIBRARY_PATH" ]; then
    LIBRARY_PATH=/usr/local/lib
else
    LIBRARY_PATH=/usr/local/lib:$LIBRARY_PATH
fi
if [ -z "$CPATH" ]; then
    CPATH=/usr/local/include/SDL
else
    CPATH=/usr/local/include/SDL:$CPATH
fi

export PATH
export MANPATH
export LIBRARY_PATH
export CPATH
